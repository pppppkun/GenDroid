- 新的工作流，在应用上输入测试，然后根据历史和当前测试的特征，筛除界面元素，接着根据模型筛选出一系列confidence的控件进行action
    - 版本A：老版本 版本B：新版本 模型已经经过版本A的fine-tune
    - 读入版本A的测试数据（每个ui api和所需要调用的页面元素）
    - 读入版本B的apk
    - 在apk上运行测试
    - 读入一个ui api，进行分析，获得一系列相关信息（是否会跳出页面，是否会切换到另一个activity，是否是输入，是否是点击）
    - 获取所有的界面元素，过滤和相关信息不符合的数据
    - 将剩下的界面元素输入到模型中，给予一个confidence列表
    - 在confidence中进行尝试
    - 如果能顺利执行下去？
- 对于短动作序列的定义问题
    - 可以定义一个action serial = {在当前activity上测试需要执行的所有动作}， action serial[-1] = 跳转
    - action serial是否会有继承关系？其实action serial如果可以继承的话，好像也非常符合用户的习惯
    - 希望定义一个符合用户习惯的action serial
    - 如果一直在一个activity上的话，之前的序列会非常的长，现在有一个新想法，增加一个定义是把一系列动作后，虽然一直在同一个activity，但是也是一个短动作，可以检测是否前后两个界面的差别在允许范围内？
- 2021.11.25 新数据集的构造
    - 复现了MaLSTM模型，在quora数据集上进行训练，准确率大概85的时候停止训练，用训练好的模型在原始数据上进行相似度检查，正确样本不动，错误样本从中挑选相似度最低的，目前已经将数据筛选出来
- 2021.11.25 如何创造我们自己的数据
    - 首先由需求人员编写api和api描述，接着由测试人员编写测试代码
- RQ
    - 这个方法科学吗？
    - 这个方法的效率如何
- 2021.12.02 详细设计
    - 对老版本对测试进行record，得到old_test_log
    - 将old_test_log丢进analysis进行分析，获得一系列相关信息（是否会跳出页面，是否会切换到另一个activity，是否是输入，是否是点击），这步主要是读入之类的
    - 将old_test_log在bert里进行fine-tune
    - 然后在新版本上replay，把analysis丢到executor里执行
    - 考虑能否直接找到，能的话直接下一步，不能直接找到，首先排除没有意义的node，然后丢到bert里获得信息，然后一个个尝试
    - 输出一个new_test_log
- 2021.12.17
    - 关于bert的迁移，现在看来可能比我想的简单，因为tpu模块同样支持cpu和gpu，要做的是把check point搞下来，搞下来后再把config配置一下，config目前看来基本上没什么要配置的东西，因为在本机上用不到gpu，主要关注的就是model build，tpuemulate和config的build
    - 成功迁移 2021.12.18
- 2021.12.25
    - 在Android文档里有一些不太符合直觉的类继承关系，比如button继承于TextView，这样会让button也享有TextView享有的属性，考虑自己构建一套
- 2022.1.2
    - 目前遇到的问题是，我想要根据description生成一个event，现在event和ground truth的联系找不到，可以搜索所有界面的元素，但是不能确定到底是哪个，能用到的信息有哪些？在description中可以增加更多的描述来描述点击后的情况？
    - 改进想法
      - specification description [后置条件] 以gherkin的语法格式书写description, given, when, then.
      - 假设
        1. layout和viewgroup等页面容器不会注册listener
        2. 不对EditText或者TextView进行click
- 2022.1.7
    - description := {human language about a single event}
    - must contain {action} and {a description of UI element}
    - action很好获取，但是对ui元素对描述应该如何呢？因为我们是基于自然语言处理的，所以希望描述和街面上的元素的描述有一定的语义相似度，所以描述不能是依赖时间线来进行查询，比如如果是{the button just create}就不太好，因为现在缺少上下文的信息
    - action的获取应该分为以下几步
      - 首选，如果直接对应那就直接找到了
      - 其次，如果没有直接对应，那么尝试用模型比较动词之间的相似度
      - 比较完相似度后，根据选择出来的组件，还可以进行过滤
### tools
- [androguard](https://github.com/androguard/androguard)  一个安卓逆向的工具
- [uiautomator2](https://github.com/openatx/uiautomator2) 一个很全能的工具，可以获取元素，也可以执行一些adb命令，感觉很厉害