"""
this class will give confidence between query and given node
"""
from demo.event import event_init_map, ACTIONS, SET_ACTIONS
from utils.common import FunctionWrap
from copy import deepcopy
from collections import deque
from sentence_transformers import SentenceTransformer, util
from functools import reduce
import spacy
import re
from collections import namedtuple
import logging
import xml.etree.ElementTree as et

construct_log = logging.getLogger('construct')
construct_log.setLevel(logging.DEBUG)
construct_log_ch = logging.StreamHandler()
construct_log_ch.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
construct_log_ch.setFormatter(formatter)
construct_log.addHandler(construct_log_ch)

attributes = {
    'text',
    'content-desc',
    'resource-id'
}
resource_id_pattern = re.compile(r'.*:id/(.*)')
NodeWithConfidence = namedtuple('NodeWithConfidence', ['node', 'confidence'])
model = SentenceTransformer('all-MiniLM-L6-v2')

widget_attempt_action_map = {
    'ImageView': ['click', 'long_click', ],
    'EditText': ['set_text'],
    'TextView': ['click'],
    'Button': ['click', 'long_click', ],
    'ImageButton': ['click', 'long_click', ],
    'CheckBox': ['click']
}


def predict_use_sbert(description, keys):
    emd1 = model.encode(description)
    emd2 = model.encode(keys)
    cos_sim = sorted(util.cos_sim(emd1, emd2)[0], key=lambda x: -x)
    return cos_sim


def predict_use_bert(description, keys):
    from bert.api import predict_two_sentence
    manhattan_sim = [predict_two_sentence(description, key)[0] for key in keys]
    manhattan_sim.sort(key=lambda x: -x)
    return manhattan_sim


def get_most_important_attribute(node: et.Element):
    if node.get('text') != '':
        return [node.get('text')]
    if node.get('content-desc') != '':
        return [node.get('content-desc')]
    # resource-id="com.android.systemui:id/navigation_bar_frame"
    if node.get('resource-id') != '':
        return [resource_id_pattern.match(node.get('resource-id')).group(1).replace('/', ' ')]
    return ['']


def get_node_attribute(node: et.Element):
    d = dict()
    for key in attributes:
        d[key] = node.get(key, None)
    return d


def get_node_attribute_values(node: et.Element):
    text = node.get('text')
    content_desc = node.get('content-desc')
    if node.get('resource-id') != '':
        resource_id = resource_id_pattern.match(node.get('resource-id')).group(1).replace('/', ' ')
    else:
        resource_id = ''
    return [text, content_desc, resource_id]


def average_cos(result):
    return sum(result) / len(result)


def get_action_based_classes(node: et.Element):
    class_ = node.get('class')
    class_ = class_[class_.rfind('.') + 1:]
    if class_ in widget_attempt_action_map:
        return widget_attempt_action_map[class_]
    else:
        return ['click']


non_action_view = {
    'Layout',
    'Group',
    'Recycle',
    'Scroll'
}


def filter_by_class(node: et.Element):
    class_ = node.get('class')
    result = True
    for view in non_action_view:
        if view in class_:
            result = False
            break
    return result


SELECT_MOST_DIRECT = 'most_direct'
SELECT_ALL = 'all'
CALCULATE_MAX = 'max'
CALCULATE_AVERAGE = 'average'
SBERT = 'sbert'
BERT = 'bert'
select_function = {
    SELECT_MOST_DIRECT: get_most_important_attribute,
    SELECT_ALL: get_node_attribute_values
}
calculate_function = {
    CALCULATE_MAX: max,
    CALCULATE_AVERAGE: average_cos
}
predict_function = {
    SBERT: predict_use_sbert,
    BERT: predict_use_bert
}


class Constructor:
    def __init__(self, select_strategy=SELECT_ALL, calculate_strategy=CALCULATE_MAX, predict_model=SBERT):
        self.select_strategy = select_strategy
        self.calculate_strategy = calculate_strategy
        self.predict_model = predict_model
        pass

    def confidence(self, node: et.Element, description):
        keys = self.select_attribute(node)
        sim = self.predict(description, keys)
        return NodeWithConfidence(node, self.calculate_score(sim))

    def select_attribute(self, node):
        return select_function[self.select_strategy](node)

    def calculate_score(self, node):
        return calculate_function[self.calculate_strategy](node)

    def predict(self, description, keys):
        return predict_function[self.predict_model](description, keys)

    # TODO more freestyle description
    def construct(self, gui, record):
        # nlp = spacy.load('en_core_web_sm')
        # doc = nlp(record.description)
        # action = ''
        # for token in doc:
        #     if token.pos_ == 'VERB':
        #         action = token
        #         break
        #
        # if action != '':
        #     action = \
        #         sorted(
        #             list(map(lambda action_: (action_, predict_use_sbert(action.text, action_.replace('_', ' '))[0]),
        #                      ACTIONS)),
        #             key=lambda x: -x[1])[0][0]
        #     if action in SET_ACTIONS:
        #         action = 'set_text'
        #     action.replace(' ', '_')
        #
        # ui_info = [child for child in action.children][0]
        # ui_info = ' '.join([child.text for child in ui_info.subtree])
        ui_info = record.description
        root = et.fromstringlist(gui)
        construct_log.info('transfer gui and record to model')

        def create_event(node_with_confidence):
            result = list()
            selector = get_node_attribute(node_with_confidence.node)
            _ = deepcopy(record)
            _.selector = selector
            for action in get_action_based_classes(node_with_confidence.node):
                _.action = action
                if action == 'set_text' and not _.action_data:
                    continue
                # construct_log.debug(_.__str__())
                result.append(event_init_map[_.action](_))
            return result

        f = FunctionWrap((_node for _node in root.iter()))
        f.append(
            filter,
            lambda _node: filter_by_class(_node)
        )
        f.append(
            map,
            lambda x: self.confidence(x, ui_info)
        ).append(
            sorted,
            lambda x: -x.confidence
        ).append(
            map,
            lambda x: create_event(x)
        ).append(
            reduce,
            lambda x, y: x + y
        )
        events = f.do()
        return deque(events)


if __name__ == '__main__':
    from demo.record import Record

    record = Record(
        {'description': 'fill the event title', 'action_data': {'text': '123123'}})
    gui = '<?xml version=\'1.0\' encoding=\'UTF-8\' standalone=\'yes\' ?>\r\n<hierarchy rotation="0">\r\n  <node index="0" text="" resource-id="com.android.systemui:id/navigation_bar_frame" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2792][1440,2960]">\r\n    <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2792][1440,2960]">\r\n      <node index="0" text="" resource-id="com.android.systemui:id/navigation_inflater" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2792][1440,2960]">\r\n        <node index="0" text="" resource-id="com.android.systemui:id/horizontal" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2792][1440,2960]">\r\n          <node index="0" text="" resource-id="com.android.systemui:id/nav_buttons" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,2792][1412,2960]">\r\n            <node index="0" text="" resource-id="com.android.systemui:id/ends_group" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,2792][1412,2960]">\r\n              <node index="0" text="" resource-id="" class="android.widget.RelativeLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,2792][166,2960]" />\r\n              <node index="1" text="" resource-id="" class="android.widget.RelativeLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[166,2792][442,2960]">\r\n                <node index="0" text="" resource-id="com.android.systemui:id/back" class="android.widget.ImageView" package="com.android.systemui" content-desc="Back" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[166,2792][442,2960]" />\r\n              </node>\r\n              <node index="2" text="" resource-id="" class="android.widget.RelativeLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[996,2792][1273,2960]">\r\n                <node index="0" text="" resource-id="com.android.systemui:id/recent_apps" class="android.widget.ImageView" package="com.android.systemui" content-desc="Overview" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[996,2792][1273,2960]" />\r\n              </node>\r\n              <node index="3" text="" resource-id="" class="android.widget.RelativeLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1273,2792][1412,2960]">\r\n                <node index="0" text="" resource-id="com.android.systemui:id/menu_container" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[1273,2792][1412,2960]">\r\n                  <node index="0" text="" resource-id="com.android.systemui:id/ime_switcher" class="android.widget.ImageView" package="com.android.systemui" content-desc="Switch input method" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[1273,2792][1412,2960]" />\r\n                </node>\r\n              </node>\r\n            </node>\r\n            <node index="1" text="" resource-id="com.android.systemui:id/center_group" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[580,2792][860,2960]">\r\n              <node index="0" text="" resource-id="com.android.systemui:id/home" class="android.widget.ImageView" package="com.android.systemui" content-desc="Home" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[580,2792][860,2960]" />\r\n            </node>\r\n          </node>\r\n        </node>\r\n      </node>\r\n    </node>\r\n  </node>\r\n  <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,2621]">\r\n    <node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,2621]">\r\n      <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,172][1440,1759]">\r\n        <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/decor_content_parent" class="android.view.ViewGroup" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,172][1440,1759]">\r\n          <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/action_bar_container" class="android.widget.FrameLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,172][1440,368]">\r\n            <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/action_bar" class="android.view.ViewGroup" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,172][1440,368]">\r\n              <node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.simplemobiletools.calendar.pro" content-desc="Navigate up" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,172][196,368]" />\r\n              <node index="1" text="New Event" resource-id="" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[252,223][583,316]" />\r\n              <node index="2" text="" resource-id="" class="androidx.appcompat.widget.LinearLayoutCompat" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1272,172][1440,368]">\r\n                <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/save" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="Save" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1272,186][1440,354]" />\r\n              </node>\r\n            </node>\r\n          </node>\r\n          <node index="1" text="" resource-id="android:id/content" class="android.widget.FrameLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,368][1440,1759]">\r\n            <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_scrollview" class="android.widget.ScrollView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="true" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,368][1440,1759]">\r\n              <node index="0" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_holder" class="android.widget.RelativeLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,368][1440,1759]">\r\n                <node index="0" text="Name" resource-id="com.simplemobiletools.calendar.pro:id/event_name" class="android.widget.EditText" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="true" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[56,424][1384,578]" />\r\n                <node index="1" text="Location" resource-id="com.simplemobiletools.calendar.pro:id/event_location" class="android.widget.EditText" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[56,634][1216,788]" />\r\n                <node NAF="true" index="2" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_show_on_map" class="android.widget.ImageView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1216,634][1384,788]" />\r\n                <node index="3" text="Description" resource-id="com.simplemobiletools.calendar.pro:id/event_description" class="android.widget.EditText" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[56,844][1384,998]" />\r\n                <node index="4" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_description_divider" class="android.widget.ImageView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1054][1440,1055]" />\r\n                <node index="5" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_time_image" class="android.widget.ImageView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[42,1097][182,1293]" />\r\n                <node index="6" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_all_day_holder" class="android.widget.RelativeLayout" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[196,1097][1440,1293]">\r\n                  <node index="0" text="All-day" resource-id="com.simplemobiletools.calendar.pro:id/event_all_day" class="android.widget.CheckBox" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="true" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[196,1139][1398,1251]" />\r\n                </node>\r\n                <node index="7" text="January 9 (Sun)" resource-id="com.simplemobiletools.calendar.pro:id/event_start_date" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[196,1293][674,1486]" />\r\n                <node index="8" text="10:00 PM" resource-id="com.simplemobiletools.calendar.pro:id/event_start_time" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1072,1293][1440,1486]" />\r\n                <node index="9" text="January 9 (Sun)" resource-id="com.simplemobiletools.calendar.pro:id/event_end_date" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[196,1486][674,1679]" />\r\n                <node index="10" text="10:00 PM" resource-id="com.simplemobiletools.calendar.pro:id/event_end_time" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1072,1486][1440,1679]" />\r\n                <node index="11" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_date_time_divider" class="android.widget.ImageView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1707][1440,1708]" />\r\n                <node index="12" text="" resource-id="com.simplemobiletools.calendar.pro:id/event_reminder_image" class="android.widget.ImageView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[42,1736][182,1759]" />\r\n                <node index="13" text="10 minutes before" resource-id="com.simplemobiletools.calendar.pro:id/event_reminder_1" class="android.widget.TextView" package="com.simplemobiletools.calendar.pro" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[196,1736][1440,1759]" />\r\n              </node>\r\n            </node>\r\n          </node>\r\n        </node>\r\n      </node>\r\n    </node>\r\n  </node>\r\n  <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,172]">\r\n    <node index="0" text="" resource-id="com.android.systemui:id/status_bar_container" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,172]">\r\n      <node index="0" text="" resource-id="com.android.systemui:id/status_bar" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,172]">\r\n        <node index="0" text="" resource-id="com.android.systemui:id/status_bar_contents" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,0][1440,172]">\r\n          <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,0][442,172]">\r\n            <node index="0" text="" resource-id="com.android.systemui:id/status_bar_left_side" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,0][442,172]">\r\n              <node index="0" text="3:29" resource-id="com.android.systemui:id/clock" class="android.widget.TextView" package="com.android.systemui" content-desc="3:29 PM" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[28,0][150,172]" />\r\n              <node index="1" text="" resource-id="com.android.systemui:id/notification_icon_area" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[150,0][442,172]">\r\n                <node index="0" text="" resource-id="com.android.systemui:id/notification_icon_area_inner" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[150,0][442,172]">\r\n                  <node index="0" text="" resource-id="com.android.systemui:id/notificationIcons" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[150,0][442,172]">\r\n                    <node index="0" text="" resource-id="" class="android.widget.ImageView" package="com.android.systemui" content-desc="ATX notification: UIAutomator" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[150,0][227,172]" />\r\n                    <node index="1" text="" resource-id="" class="android.widget.ImageView" package="com.android.systemui" content-desc="Android System notification: Serial console enabled" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[227,44][304,128]" />\r\n                    <node index="2" text="" resource-id="" class="android.widget.ImageView" package="com.android.systemui" content-desc="Settings notification: Virtual SD card" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[304,0][381,172]" />\r\n                  </node>\r\n                </node>\r\n              </node>\r\n            </node>\r\n          </node>\r\n          <node index="1" text="" resource-id="com.android.systemui:id/cutout_space_view" class="android.view.View" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[442,0][998,171]" />\r\n          <node index="2" text="" resource-id="com.android.systemui:id/system_icon_area" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[998,0][1412,172]">\r\n            <node index="0" text="" resource-id="com.android.systemui:id/system_icons" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[998,0][1412,172]">\r\n              <node index="0" text="" resource-id="com.android.systemui:id/statusIcons" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[998,0][1385,172]">\r\n                <node index="0" text="" resource-id="com.android.systemui:id/wifi_combo" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="Wifi signal full." checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1249,47][1311,124]">\r\n                  <node index="0" text="" resource-id="com.android.systemui:id/wifi_group" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1258,47][1311,124]">\r\n                    <node index="0" text="" resource-id="com.android.systemui:id/wifi_combo" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1258,59][1311,112]">\r\n                      <node index="0" text="" resource-id="com.android.systemui:id/wifi_signal" class="android.widget.ImageView" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1258,59][1311,112]" />\r\n                    </node>\r\n                  </node>\r\n                </node>\r\n                <node index="1" text="" resource-id="com.android.systemui:id/mobile_combo" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="Phone three bars." checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1311,47][1364,124]">\r\n                  <node index="0" text="" resource-id="com.android.systemui:id/mobile_group" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1311,47][1364,124]">\r\n                    <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1311,59][1364,112]">\r\n                      <node index="0" text="" resource-id="com.android.systemui:id/mobile_signal" class="android.widget.ImageView" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1311,59][1364,112]" />\r\n                    </node>\r\n                  </node>\r\n                </node>\r\n              </node>\r\n              <node index="1" text="" resource-id="com.android.systemui:id/battery" class="android.widget.LinearLayout" package="com.android.systemui" content-desc="Battery 100 percent." checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1385,0][1412,172]">\r\n                <node index="0" text="" resource-id="" class="android.widget.ImageView" package="com.android.systemui" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1385,63][1412,109]" />\r\n              </node>\r\n            </node>\r\n          </node>\r\n        </node>\r\n      </node>\r\n    </node>\r\n  </node>\r\n  <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n    <node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n      <node index="0" text="" resource-id="android:id/content" class="android.widget.FrameLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n        <node index="0" text="" resource-id="android:id/parentPanel" class="android.widget.LinearLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n          <node index="1" text="" resource-id="android:id/inputArea" class="android.widget.FrameLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n            <node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n              <node index="0" text="" resource-id="com.android.inputmethod.latin:id/main_keyboard_frame" class="android.widget.LinearLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]">\r\n                <node index="0" text="" resource-id="com.android.inputmethod.latin:id/suggestion_strip_view" class="android.widget.RelativeLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,1899]">\r\n                  <node index="0" text="" resource-id="com.android.inputmethod.latin:id/suggestions_strip" class="android.widget.LinearLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[126,1764][1314,1899]">\r\n                    <node index="0" text="" resource-id="" class="android.widget.TextView" package="com.android.inputmethod.latin" content-desc="No suggestion" checkable="false" checked="false" clickable="true" enabled="false" focusable="false" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[126,1764][503,1899]" />\r\n                    <node index="1" text="" resource-id="" class="android.widget.ImageView" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[503,1790][507,1874]" />\r\n                    <node index="2" text="" resource-id="" class="android.widget.TextView" package="com.android.inputmethod.latin" content-desc="No suggestion" checkable="false" checked="false" clickable="true" enabled="false" focusable="false" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[507,1764][932,1899]" />\r\n                    <node index="3" text="" resource-id="" class="android.widget.ImageView" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[932,1790][936,1874]" />\r\n                    <node index="4" text="" resource-id="" class="android.widget.TextView" package="com.android.inputmethod.latin" content-desc="No suggestion" checkable="false" checked="false" clickable="true" enabled="false" focusable="false" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" visible-to-user="true" bounds="[936,1764][1314,1899]" />\r\n                  </node>\r\n                  <node index="1" text="" resource-id="com.android.inputmethod.latin:id/suggestions_strip_voice_key" class="android.widget.ImageButton" package="com.android.inputmethod.latin" content-desc="Voice input" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1314,1762][1440,1898]" />\r\n                </node>\r\n                <node index="1" text="" resource-id="com.android.inputmethod.latin:id/keyboard_view" class="android.view.View" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1899][1440,2621]">\r\n                  <node index="0" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Q" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1919][145,2139]" />\r\n                  <node index="1" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="W" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[144,1919][289,2139]" />\r\n                  <node index="2" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="E" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[288,1919][433,2139]" />\r\n                  <node index="3" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="R" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[432,1919][577,2139]" />\r\n                  <node index="4" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="T" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[576,1919][721,2139]" />\r\n                  <node index="5" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Y" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[720,1919][865,2139]" />\r\n                  <node index="6" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="U" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[864,1919][1009,2139]" />\r\n                  <node index="7" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Capital I" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1008,1919][1153,2139]" />\r\n                  <node index="8" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="O" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1152,1919][1297,2139]" />\r\n                  <node index="9" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="P" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1296,1919][1440,2139]" />\r\n                  <node index="10" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="A" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2139][217,2359]" />\r\n                  <node index="11" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="S" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[216,2139][361,2359]" />\r\n                  <node index="12" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="D" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[360,2139][505,2359]" />\r\n                  <node index="13" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="F" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[504,2139][649,2359]" />\r\n                  <node index="14" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="G" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[648,2139][793,2359]" />\r\n                  <node index="15" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="H" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[792,2139][937,2359]" />\r\n                  <node index="16" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="J" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[936,2139][1081,2359]" />\r\n                  <node index="17" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="K" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1080,2139][1225,2359]" />\r\n                  <node index="18" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="L" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1224,2139][1440,2359]" />\r\n                  <node index="19" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Shift" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2359][217,2579]" />\r\n                  <node index="20" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Z" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[216,2359][361,2579]" />\r\n                  <node index="21" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="X" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[360,2359][505,2579]" />\r\n                  <node index="22" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="C" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[504,2359][649,2579]" />\r\n                  <node index="23" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="V" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[648,2359][793,2579]" />\r\n                  <node index="24" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="B" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[792,2359][937,2579]" />\r\n                  <node index="25" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="N" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[936,2359][1081,2579]" />\r\n                  <node index="26" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="M" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1080,2359][1225,2579]" />\r\n                  <node index="27" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Delete" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1224,2359][1440,2579]" />\r\n                  <node index="28" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Symbols" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2579][217,2621]" />\r\n                  <node index="29" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="," checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[216,2579][361,2621]" />\r\n                  <node index="30" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Space" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[360,2579][1081,2621]" />\r\n                  <node index="31" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="." checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1080,2579][1225,2621]" />\r\n                  <node index="32" text="" resource-id="" class="com.android.inputmethod.keyboard.Key" package="com.android.inputmethod.latin" content-desc="Next" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[1224,2579][1440,2621]" />\r\n                </node>\r\n              </node>\r\n            </node>\r\n          </node>\r\n        </node>\r\n        <node index="1" text="" resource-id="com.android.inputmethod.latin:id/keyboard_view" class="android.widget.RelativeLayout" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,1759][1440,2621]" />\r\n      </node>\r\n    </node>\r\n    <node index="1" text="" resource-id="android:id/navigationBarBackground" class="android.view.View" package="com.android.inputmethod.latin" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" visible-to-user="true" bounds="[0,2792][1440,2960]" />\r\n  </node>\r\n</hierarchy>'
    gui = et.tostring(et.fromstring(gui).find(".*[@package='com.simplemobiletools.calendar.pro']")).decode('utf-8')
    repair = Constructor()
    events = repair.construct(gui, record)
    for event in events:
        print(event)
    # print(predict_use_sbert('fill the title of event', 'event title'))
    # print(predict_use_sbert('fill the title of event', 'event_title'))
    # print(predict_use_sbert('fill the title of event', 'title'))
    # print(predict_use_sbert('fill the title of event', 'new event'))
    # print(predict_use_sbert('fill the title of event', 'event description'))
    # print(predict_use_sbert('fill the title of event', 'location'))
